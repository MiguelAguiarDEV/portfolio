---
import FloatingNav from "@/components/FloatingNav.astro";
import Panel from "@/components/Panel.astro";
import CardsGrid from "@/components/GridCard.astro";
import AboutPanel from "@/components/panels/AboutPanel.astro";
import Analytics from "@vercel/analytics/astro";
import "@/styles/global.css";

type PanelCard = {
    title: string;
    description: string;
};

type PanelData = {
    id: string;
    label: string;
    title: string;
    lead?: string;
    background: string;
    cards?: PanelCard[];
};

const panels: PanelData[] = [
    {
        id: "home",
        label: "Inicio",
        title: "Miguel Santiesteban",
        lead: "Backend – Node – Laravel – React – Prisma",
        background:
            "radial-gradient(120vmax 120vmax at 15% 15%, #15171a, #0d0e12 60%)",
        cards: [
            {
                title: "Queater",
                description: "SaaS para restaurantes. Menús, stock y POS.",
            },
            {
                title: "CSV Analyzer",
                description: "Exploración de datos con IA. React + Node.",
            },
            {
                title: "AICLID",
                description:
                    "Detección celular YOLO. Proyecto de investigación.",
            },
        ],
    },
    {
        id: "about",
        label: "Sobre mí",
        title: "Sobre mí",
        background: "linear-gradient(135deg, #0b3a36, #0b2a3a 70%)",
    },
    {
        id: "work",
        label: "Proyectos",
        title: "Proyectos",
        background: "linear-gradient(135deg, #2a143a, #0f1020 70%)",
        cards: [
            {
                title: "Queater",
                description:
                    "Laravel + Inertia + React. Multi-tenant con roles.",
            },
            {
                title: "Portfolio",
                description: "Astro + Tailwind con animaciones de clip-path.",
            },
            {
                title: "Tooling",
                description: "Plantillas CI, lint y tests. Monorepo con Bun.",
            },
        ],
    },
    {
        id: "contact",
        label: "Contacto",
        title: "Contacto",
        background: "linear-gradient(135deg, #3a1a1a, #101010 70%)",
        cards: [
            { title: "Email", description: "miguel@example.com" },
            { title: "GitHub", description: "@MiguelAguiarDev" },
            { title: "LinkedIn", description: "/in/MiguelAguiarDev" },
        ],
    },
];

const navItems = panels.map(({ id, label }) => ({ id, label }));
---

<!doctype html>
<html lang="es" class="dark">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <link
            rel="icon"
            href="/favicon-dark.svg"
            media="(prefers-color-scheme: light)"
        />
        <link
            rel="icon"
            href="/favicon-light.svg"
            media="(prefers-color-scheme: dark)"
        />
        <title>MiguelAguiarDev</title>
    </head>
    <body>
        <FloatingNav items={navItems} />
        <main id="stage" role="main" aria-live="polite">
            {
                panels.map((panel, index) => (
                    <Panel
                        id={panel.id}
                        title={panel.title}
                        lead={panel.lead}
                        initial={index === 0}
                        background={panel.background}
                        hideHeading={panel.id === "about"}
                    >
                        {panel.id === "about" ? (
                            <AboutPanel />
                        ) : (
                            panel.cards && <CardsGrid items={panel.cards} />
                        )}
                    </Panel>
                ))
            }
        </main>
        <Analytics />
        <script type="module" src="/scripts/stage-navigation.js"></script>
    </body>
</html>

<style>
    #stage {
        position: relative;
        width: 100vw;
        height: 100dvh;
        isolation: isolate;
        background: radial-gradient(
            120vmax 120vmax at 10% 10%,
            #17181c,
            #0f0f10 60%
        );
    }
</style>
