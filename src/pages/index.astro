---
import FloatingNav from "@/components/FloatingNav.astro";
import Panel from "@/components/Panel.astro";
import CardsGrid from "@/components/GridCard.astro";
import AboutPanel from "@/components/panels/AboutPanel.astro";
import ProjectsPanel from "@/components/panels/ProjectsPanel.astro";
import SkillsPanel from "@/components/panels/SkillsPanel.astro";
import ContactPanel from "@/components/panels/ContactPanel.astro";
import { projects } from "@/data/projects";
import Analytics from "@vercel/analytics/astro";
import "@/styles/global.css";

type PanelCard = {
    title: string;
    description: string;
};

type PanelData = {
    id: string;
    label: string;
    labelKey: string;
    title: string;
    titleKey: string;
    lead?: string;
    leadKey?: string;
    background: string;
    cards?: PanelCard[];
};

const panels: PanelData[] = [
    {
        id: "about",
        label: "Sobre mi",
        labelKey: "nav.about",
        title: "Sobre mi",
        titleKey: "panel.about.title",
        background: "linear-gradient(135deg, #0b3a36, #0b2a3a 70%)",
    },
    {
        id: "work",
        label: "Proyectos",
        labelKey: "nav.projects",
        title: "Proyectos",
        titleKey: "panel.projects.title",
        background: "linear-gradient(135deg, #2a143a, #0f1020 70%)",
    },
    {
        id: "skills",
        label: "Habilidades",
        labelKey: "nav.skills",
        title: "Habilidades",
        titleKey: "panel.skills.title",
        background: "linear-gradient(135deg, #1a2a3a, #0f1520 70%)",
    },
    {
        id: "contact",
        label: "Contacto",
        labelKey: "nav.contact",
        title: "Contacto",
        titleKey: "panel.contact.title",
        background: "linear-gradient(135deg, #1a1a2e, #0f0f1a 70%)",
    },
];

const navItems = panels.map(({ id, label, labelKey }) => ({
    id,
    label,
    labelKey,
}));
---

<!doctype html>
<html lang="es" class="dark">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <link
            rel="icon"
            href="/favicon-dark.svg"
            media="(prefers-color-scheme: light)"
        />
        <link
            rel="icon"
            href="/favicon-light.svg"
            media="(prefers-color-scheme: dark)"
        />
        <title>MiguelAguiarDev</title>
    </head>
    <body>
        <FloatingNav items={navItems} />
        <main id="stage" role="main" aria-live="polite">
            {
                panels.map((panel, index) => (
                    <Panel
                        id={panel.id}
                        title={panel.title}
                        lead={panel.lead}
                        initial={index === 0}
                        background={panel.background}
                        hideHeading={panel.id === "about"}
                    >
                        {panel.id === "about" ? (
                            <AboutPanel />
                        ) : panel.id === "work" ? (
                            <ProjectsPanel
                                title="Repositorios de GitHub"
                                titleKey="projects.title"
                                projects={projects}
                            />
                        ) : panel.id === "skills" ? (
                            <SkillsPanel />
                        ) : panel.id === "contact" ? (
                            <ContactPanel />
                        ) : (
                            panel.cards && <CardsGrid items={panel.cards} />
                        )}
                    </Panel>
                ))
            }
        </main>
        <Analytics />
        <script type="module" src="/scripts/i18n.js"></script>
        <script type="module" src="/scripts/stage-navigation.js"></script>
    </body>
</html>

<style>
    #stage {
        position: relative;
        width: 100vw;
        height: 100dvh;
        isolation: isolate;
        background: radial-gradient(
            120vmax 120vmax at 10% 10%,
            #17181c,
            #0f0f10 60%
        );
    }
</style>



