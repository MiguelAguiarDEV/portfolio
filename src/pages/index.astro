---
import FloatingNav from "@/components/FloatingNav.astro";
import Panel from "@/components/Panel.astro";
import CardsGrid from "@/components/CardsGrid.astro";
import Analytics from "@vercel/analytics/astro";
import "@/styles/global.css";

type PanelCard = {
    title: string;
    description: string;
};

type PanelData = {
    id: string;
    label: string;
    title: string;
    lead?: string;
    background: string;
    cards: PanelCard[];
};

const panels: PanelData[] = [
    {
        id: "home",
        label: "Inicio",
        title: "Miguel Santiesteban",
        lead: "Backend \u2013 Node \u2013 Laravel \u2013 React \u2013 Prisma",
        background:
            "radial-gradient(120vmax 120vmax at 15% 15%, #15171a, #0d0e12 60%)",
        cards: [
            {
                title: "Queater",
                description: "SaaS para restaurantes. Men\u00fas, stock y POS.",
            },
            {
                title: "CSV Analyzer",
                description: "Exploraci\u00f3n de datos con IA. React + Node.",
            },
            {
                title: "AICLID",
                description:
                    "Detecci\u00f3n celular YOLO. Proyecto de investigaci\u00f3n.",
            },
        ],
    },
    {
        id: "about",
        label: "Sobre m\u00ed",
        title: "Sobre m\u00ed",
        background: "linear-gradient(135deg, #0b3a36, #0b2a3a 70%)",
        cards: [
            {
                title: "Perfil",
                description:
                    "Programador orientado a backend. Sistemas y rendimiento.",
            },
            {
                title: "Stack",
                description: "TS/Node, Laravel, React, Prisma, Docker, CI/CD.",
            },
            {
                title: "Ahora",
                description: "Buscando remoto. Enfocado en producto y DX.",
            },
        ],
    },
    {
        id: "work",
        label: "Proyectos",
        title: "Proyectos",
        background: "linear-gradient(135deg, #2a143a, #0f1020 70%)",
        cards: [
            {
                title: "Queater",
                description:
                    "Laravel + Inertia + React. Multi-tenant con roles.",
            },
            {
                title: "Portfolio",
                description: "Astro + Tailwind con animaciones de clip-path.",
            },
            {
                title: "Tooling",
                description: "Plantillas CI, lint y tests. Monorepo con Bun.",
            },
        ],
    },
    {
        id: "contact",
        label: "Contacto",
        title: "Contacto",
        background: "linear-gradient(135deg, #3a1a1a, #101010 70%)",
        cards: [
            {
                title: "Email",
                description: "miguel@example.com",
            },
            {
                title: "GitHub",
                description: "@MiguelAguiarDev",
            },
            {
                title: "LinkedIn",
                description: "/in/MiguelAguiarDev",
            },
        ],
    },
];

const navItems = panels.map(({ id, label }) => ({ id, label }));
---

<!doctype html>
<html lang="es" class="dark">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <link
            rel="icon"
            href="/favicon-dark.svg"
            media="(prefers-color-scheme: light)"
        />
        <link
            rel="icon"
            href="/favicon-light.svg"
            media="(prefers-color-scheme: dark)"
        />
        <title>MiguelAguiarDev</title>
    </head>
    <body>
        <FloatingNav items={navItems} />
        <main id="stage" role="main" aria-live="polite">
            {
                panels.map((panel, index) => (
                    <Panel
                        id={panel.id}
                        title={panel.title}
                        lead={panel.lead}
                        initial={index === 0}
                        background={panel.background}
                    >
                        <CardsGrid items={panel.cards} />
                    </Panel>
                ))
            }
        </main>
        <Analytics />
        <script type="module" src="/src/scripts/stage-navigation.ts"></script>
    </body>
</html>

<style>
    #stage {
        position: relative;
        width: 100vw;
        height: 100dvh;
        isolation: isolate;
        background: radial-gradient(
            120vmax 120vmax at 10% 10%,
            #17181c,
            #0f0f10 60%
        );
    }
</style>
