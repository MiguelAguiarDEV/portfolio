---
export interface Props {
    id: string;
    title: string;
    lead?: string;
    initial?: boolean;
    background?: string;
}

const { id, title, lead, initial = false, background } = Astro.props;
const headingId = `h-${id}`;
const ariaHidden = initial ? "false" : "true";
const panelStyle = background ? `--bg: ${background}` : undefined;
---

<div class="panel" id={id} aria-hidden={ariaHidden} style={panelStyle}>
    <div class="bg"></div>
    <section aria-labelledby={headingId}>
        <slot />
    </section>
</div>

<style>
    .panel {
        position: absolute;
        inset: 0;
        z-index: 0;
        display: grid;
        grid-template-rows: 1fr;
        grid-template-columns: 1fr;
        place-items: center;
        overflow: visible;
    }

    .panel > .bg {
        position: absolute;
        inset: 0;
        background: var(--bg, #111);
        pointer-events: none;
    }

    .panel > section {
        margin-top: 30px;
        position: relative;
        z-index: 1;
        width: min(1200px, 84vw);
        height: min(85vh, 85svh);
        max-height: min(85vh, 85svh);
        min-height: min(85vh, 85svh);
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: var(--radius);
        overflow: visible;
    }

    .panel > section > * {
        width: 100%;
        height: 100%;
        max-height: 100%;
        overflow: hidden;
    }

    .panel h1 {
        margin: 0 0 10px;
        font-size: var(--fs-2);
    }

    .panel p {
        margin: 0;
        font-size: var(--fs-1);
        opacity: 0.9;
    }

    .panel .lead {
        margin-bottom: 16px;
    }

    .panel.entering {
        animation: reveal var(--wipe-ms) ease-out both;
    }

    @keyframes reveal {
        0% {
            clip-path: inset(0 100% 0 0 round 0);
        }

        100% {
            clip-path: inset(0 0 0 0 round 0);
        }
    }

    @media (max-width: 1000px) {
        .panel > section {
            width: min(960px, 92vw);
            height: min(85vh, 85svh);
            max-height: min(85vh, 85svh);
            min-height: min(85vh, 85svh);
        }
    }
</style>
